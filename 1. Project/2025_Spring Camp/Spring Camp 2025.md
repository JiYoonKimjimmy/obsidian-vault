
# 통합의 근본! 인가 플랫폼 - HR SaaS는 왜 복잡할까?
- (갤럭시) Flex - 이명현님

### 통합의 가치
- HR: 회사 내 조직원의 통합 관리
- 도메인 통합 시나리오
	- 급여 계약 > 정산 > 지급 시나리오에서 발생하는 다른 도메인 간의 통합 필요
- 기능적 통합 시나리오
	- 전자결재 서비스의 각각 다른 도메인 기능 통합 필요
- 도메인/기능을 통합하다보면 각 도메인의 접근을 하고자하는 권한/인가 체크가 필요
- 상위 도메인 > 하위 도메인으로 구성하고, 상위 도메인의 권한/인가 체크를 통해 세부적인 하위 도메인 권한/인가 체크

### 인가 판단 어려움의 배경
- Authentication / Permission / Authorization
	- Authentication 인증 : 사용자 식별
	- Permission 권한 : 사용자 or 그룹에 부여한 역할로 할 수 있는 액션
	- Authorization 인가 : 사용자가 리소스에 권한 기반의 액션을 할 수 있는지 허가
- HR 관리하는 리소스가 점점 많아지면서 조직 구조가 상위/하위 트리 구조의 복잡도 증가

### ReBAC: 통합 인가 플랫폼
- 권한 인가 패턴
	- RBAC
		- Coarse-Grained
		- Role 기준 요청자가 포함되어 있는지 확인하는 방식
		- 요청자, 승인자 의 Role 을 각각 직접 확인하여 권한 인가
		- 하지만 복잡한 로직에 대한 구현 복잡도 증가
	- ReBAC
		- Find-Grained 기반 인가 패턴
		- 요청에 대한 요청자/승인자 의 관계 기준으로 권한 인가
		- **"User 가 Object 에 대한 관계를 가지는가" 조건 기반 권한 인가 체크**
	- ABAC
		- Find-Grained 기반 인가 패턴
		- 요청에 대한 속성 기준으로 권한 인가
- ReBAC 구현체: OpenFGA
	- Zanzibar 기반 구글드라이브의 권한 체크 기반 솔루션
	- 도메인 서버 > 중계 서버 > OpenFGA 서버로 인가 체크 요청
	- 각 도메인에 대한 정의를 하고 트리-구조에 맞게 **각 도메인 간의 관계 정의하여 리소스에 대한 권한 부여**
		- 도메인에 대한 정의 시, 도메인 구성 element 에 대한 상세 권한 정의
- OpenFGA 도입을 통해 플랫폼 분리 효과
	- 성능 개선
	- 비즈니스 로직 / 인가 논리(플랫폼) 독립 가능

### 통합 완성을 위한 플랫폼 고도화
- 메시지 아웃박스 패턴을 통해 신뢰성 이벤트 스트리밍 
- CDC 역할 : Spring Debezium Support 활용
- SSEs 를 통해서 클라이언트에서 서버에서 처리된 결과를 바로 통지 받도록 서비스 구축
- Core HR 서버 <> Authorization 서버 간의 양방향 의존 문제 발생
	- 인가 체크하기 전에 HR 정보가 필요하기 때문
	- HR 정보 변경에 대한 이벤트를 Authorization 서버로 발행하여 HR 정보 저장 처리

### 단단한 통합의 가치 실현 목표
- 인가 플랫폼 + 공통 플랫폼 = 통합 플랫폼
- 통합 플랫폼 + 검색 플랫폼 = 백본 플랫폼
- ....
- 인가 플랫폼에서 점점 붙여나가면서 인프라 그림이 커진다...
- Next Flex = AI SaaS

---
# Amazon Q Developer와 함께 하는 생성형 AI시대 헤쳐나가기!
- (갤럭시) AWS - 이상현님

### 현대 소프트웨어 개발의 패러다임
- 최근 2~3년 간의 개발 트랜드: 컨테이너, k8s 등등
- 바이브 코딩(Vibe Coding): LLM 프롬프트 입력하여 문제 해결하는 AI 기반 프로그래밍 기법
- 마틴 파울러 왈: 비결정적 프로그래밍 > 자연어가 코드로 만들어질 수 있는 AI 기반 프로그래밍
- AI 지원 앱으로 코드 생성하는 앱들에 대한 수요가 높아지고 있음

### Amazone Q Developer
- 소프트웨어 개발 수명 주기(SDLC) 전반에 걸쳐 개발자와 IT 전문가의 개발 속도 향상
- 에이전트가 자율적으로 기능 구현, 코드 리팩토링, 소프트웨어 업그레이드 지원
- AWS 환경에서 AI 프롬포트로 인프라 구성, 취약점 분석 등 가능
- 개발자를 위한 Amazone Q 에이전트 구성
	- `/dev` 프로젝트 코드 개발
		- 요구 사항 분석
		- 코드 구현
	- `/test` 테스트 지원 에이전트
		- 테스트 코드 작성
	- `/review` 코드 리뷰 에이전트
		- CWE 점검까지 지원
	- `/docs` 문서 작성 지원 에이전트
		- README 파일 생성
	- `/transform` 플랫폼 전환 지원 에이전트
		- 시스템 개발 플랫폼 자체를 다른 개발 플랫폼으로 전환
		- 변경 사항에 대한 보고서까지 작성해주기 때문에 안전하게 플랫폼 전환 가능
		- Java 버전 업그레이드, Spring 버전 업그레이드까지 모두 가능
- CLI 버전으로도 터미널에서도 바로 활용 가능
- MCP 적용 가능
- 프리 티어와 프로 티어(19달러) 차이는 횟수 차이
- 소스 저장하지 않고 AI 지원 가능
	- 버그 추적용이지 AI 학습 모델 용도 아님

---
# Talk 2 - 함께 성장하기
- (리젠시) 당근 - MC 변정훈, 패널 넥스트스텝 - 박재성 / 네이버 - 이경일

- 동료와 함께 성장하는 방법
	- 활발한 커뮤니케이션를 통한 성장 방법
	- 도메인 지식 전파를 통한 성장 방법
- 쓰레기 환경에서 무언가를 바꿀 수 있다는 변화의 기회로 만들자
	- 하지만, 그것도 가능한 조직에서야 가능하다..
- 조직의 심리적 안정감
	- 나의 일을 동료가 함께 해결해줄 수 있는 신뢰감이 높은 조직
	- 구글 조사 결과 심리적 안정감이 높은 조직이 높은 성과 보장
	- 심리적 안정감 높일 수 있는 주체는 리더의 몫!
	- 편안한 느낌의 리더가 심리적 안정감을 줄 수 있더라..
- **AI 코드 리뷰 도구 : 코드 래빗**

---
# Virtual Thread, 어디까지 보고 오셨어요?
- (갤럭시) 쿠팡 - 박성훈, 정승주

### Overview
- JDK21 추가된 버츄얼 스레드
- Thread-Per Request 스타일의 확장성 확보
- 높은 동시 처리량이 필요한 서버 개발의 효율적 동작 지원
- Spring 에서도 Virtual Thread Executor 별도 스레드-풀 생성 및 교체 가능
- 플랫폼-스레드 대비 100% (11K > 22K) 성능 개선 효과 확인
- Virtual Thread + Socket I/O 기준으로 Blocking I/O 에서도 높은 성능 처리 가능

### Virtual Thread Scheduling & Context Switching
- 버츄얼 스레드도 스케쥴링과 컨텍스트 스위칭이 일어나지만 굉장히 빠름
- 버츄얼 스레드는 JVM 플랫폼 스레드가 버츄얼 스페드를 실행
- 플랫폼 스레드와의 차이는 스레드 작업 처리의 주체가 OS 가 아닌 JVM 에서 처리
- 힙 메모리에 있는 버츄얼 스레드의 task 를 플랫폼 스레드가 복제해서 작업 처리(?)
- 플랫폼 스레드의 컨텍스트 스위칭이 느린 이유는 OS 로 이동하고, 각종 OS 캐시를 확인하는 과정에서 지연 발생하는데,
	- 버츄얼 스레드는 OS 로 가지 않기 때문에 컨텍스트 스위칭 속도가 빠름
- 버츄얼 스레드는 직접 작업할 수 없기 때문에, 플랫폼 스레드의 메모리 공강을 조작하여 버츄얼 스레드 작업을 플랫폼 스레드로 보내어 작업을 처리
	- 이러한 측면에서 버츄얼 스레드는 중단 후 재개하는 방식으로 작업 처리
- Function & Coroutine 
	- 코루틴은 매커니즘 처럼 중단하고 재개하는 매커니즘을 버츄얼 스레드에 적용

### Virtual Thread Continuation
- Continuation Stack & Heap 활용한 함수의 실행 상태를 중단/재개
	- **작업 중단이 요청되면 작업을 Heap 에 복제하고, 다음 작업으로 바로 뛰어넘아가고, 다시 돌아온다면 중단 요청한 작업부터 이후 작업을 다시 시작**
- Continuation 은 Runnable, StackChunk 를 가지고 있기 때문에 함수 실행 가능

### Kernel 과 Virtual Thread 간의 블로킹 문제
- 커널에서 블로킹 I/O 가 발생하면 OS 스레드 자체가 블로킹 되고, 플랫폼-스레드도 블로킹

### Socket I/O
- Socket 주요 구현을 C++ native 플랫폼에서 JVM 플랫폼 구현체로 대체
- JDK13 이전 소켓 구현체는 모두 블로킹 I/O 처리하는 네이티브 구현체로 위임
- JDK13 이후로는 NioSocketImpl 구현체로 논-블로킹 I/O 처리
	- 논-블로킹  소켓 처리는 읽기/쓰기 결과 & 재시도 여부 결과를 즉시 반환
	- 재시도를 하게 된다면, 버츄얼-스레드는 중단 이후 소켓 사용 준비가 되면 버츄얼-스레드 다음 작업 진행
		- poller 가 소켓을 감시하여 소켓 준비되면 버츄얼-스레드를 다시 깨워서 작업 진행
			- poller 는 별도의 플랫폼-스레드를 생성하고 무한-루프를 수행하면서 소켓 상태를 감시
			- 읽기/쓰기 각각 다른 1개의 poller 가 존재
			- Selector APi 를 통해서 소켓의 상태를 감지
				- OS 별로 Selector API 는 다르게 구현

### 마무리
- 버츄얼-스레드는 Continuation 을 통해 플랫폼-스레드를 메모리 조작하여 자신의 Runnable 을 실행/중단
	- 버츄얼-스레드의 컨텍스트-스위칭은 OS 가 아닌 JVM 애플리케이션 레벨이니 속도가 더 빠름
- Pinning
	- Synchronized Block 내에서 I/O 발생 시 플랫폼-스레드 컨텍스트 스위칭이 발생하면서 **Pinning** 이라는 문제 발생

---
# 카카오뱅크 펀드시스템에 날개를 달아준, 사내 Spring Boot Starter 라이브러리 이야기
- (갤럭시) 카카오뱅크 - 손수민

### 펀드 시스템 분리 구축 배경
- 모놀리식 레거시 시스템에서 MSA 분리
	- 오픈소스 아닌 상용 프레임워크 기반 레거시 시스템
- 펀드라는 핵심금융원장 + 규제 산업 시스템을 클라우드 인프라 구축 방법

### 오픈소스 Spring 개발한 펀드 시스템
- 코어뱅킹과는 별도 분리된 펀드 시스템을 완전 다른 프레임워크인 Spring F/W 적용

### 내부 라이브러리 구현 배경
- 펀드 도메인에 다양한 기능을 공통화를 위해서 사내 내부 라이브러리 개발하여 공통 모듈 기능 제공
	- 복잡한 설정을 빠르게 설정하여 신규 프로젝트 구축
- 그리고, Spring 생태계를 더 잘 이해하기 위해 공통 라이브러리 개발 진행
- **직렬화/역직렬화 공통화**
	- FixedLength 전문 관련 문제 해결
		- Jackson 의 커스텀 Serializer 를 구현하여 고정길이 전문 데이터를 직렬화 처리
		- 커스텀 Serializer 를 처리하는 커스텀 annotation 을 개발하여 역직렬화 대상 DTO 클래스에 적용
- **HTTP Client 추상화**
	- 사내 API 통신 규격에 맞도록 HTTP Client 공통 모듈을 통해서 서비스 통일성 확보
	- 책임 연쇄 패턴을 사용해 구현의 표준을 제공하고 Handler 인터페이스를 통해 필요한 로직을 각 개발팀에서 구현하도록 위임
	- HandlerChain 구조로 handler 만 추가하면 부가 기능을 손쉽게 확장할 수 있도록 구성
- **분산 트레이싱**
	- 시중 분산 트레이싱 도구를 추상화
	- Baggage: 분산 트레이싱에 필요한 정보를 담고 있는 객체

---
# 빅뱅 방식으로 최선의 개발하기
- (리젠시) 머니무브 - 김근수