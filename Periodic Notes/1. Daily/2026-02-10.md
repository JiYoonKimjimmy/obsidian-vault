
## Redis Stream Consumer 개발 요구 사항
- 별도 Stream Redis Connection Factory 구현체를 통해 Redis Stream 연동 구현
- 단일 Connection Factory 로 단일 Container 를 구성하고, 다중 Consumer 스레드를 생성하여 멀티-플렉싱 방식으로 Redis Stream 데이터 접근
- Redis Stream 데이터를 조회하는 `XREADGROUP` 명령어는 `BLOCK` 방식으로 데이터 조회 처리
	- `BLOCK` 방식이므로 Strem Container 안에서의 지연은 발생할 수 있음
### 추후 개발 요건
- PEL 메시지 재처리를 위한 XCLAIM 로직은 동적 스케쥴러 생성하는 방법으로 구현 계획 필요
- Redis Connection Pool 활용한 병렬 처리 성능 비교

```
일단 이슈에 대해 내가 이해한 것이 맞는지 확인해줘.

Redis Stream 의 Consumer Group 별로 데이터 처리를 위한 명령어인 `XREADGROUP` 을 사용하기 위해서는 `BLOCK` 이 필요한데, Lettuce 클라이언트에서는 AWS ElastiCache 로의 `BLOCK` 명령어가 제대로 실행되지 않은 문제가 발생함.

그래서 non-blocking 방식으로 `XREADGROUP` 명령어를 실행해야하지만, 그랬을 경우 다른 요청 명령어에 대한 지연 발생 가능함.
```

---
## 케이뱅크 내부 진행사항 공유 회의
> [케이뱅크 은행 연계 프로젝트 WBS_V0.2](https://docs.google.com/spreadsheets/d/1GmDJuu1AWuTDNv6AYrkGbNYLrfZe9pT4A4ZYvbxB2Uc/edit?usp=sharing)

- public api 는 디자인 완료 후 설계 및 개발 진행 가능
- 디자인 진행 상황은 2/9 서현님 확인 결과, 팀무신사에서 디자인 가능 일정을 2/19 일자에 전달 예정이라고 함..
- 케이뱅크에서 머니 서비스 접근을 위한 테스트 페이지 사전 개발 필요
	- 머니 진입 토큰 발급, 머니/결제 창 랜더링할 수 있도록 하는 테스트 페이지 필요
	- NAT 네트워크 작업 완료
- 케이뱅크-아웃바운드 개발 작업은 70프로 완료
- 결제팀
	- 오픈뱅킹 송금할 때 케이뱅크 MID 설정 필요
	- 케이뱅크 제휴통장 등록시, 케이뱅크 제휴통장을 오픈뱅킹 등록 실패 케이스 정리하여 기획 협의 필요
		- 케이뱅크 제휴통장 등록 실패시, 내부 배치 프로세스를 통해서 재시도를 하고 있음
	- 오픈뱅킹 관련하여 결제 & 선불 케이뱅크 제휴통장 등록 작업 관련 개발 협의 필요
- 오픈뱅킹 관련 이슈
	- 페이먼츠 > 헥토를 통한 오픈뱅킹 활용을 하더라도 오픈뱅킹 활용에 대한 오너쉽은 페이먼츠에서 관리 필요
	- 오픈뱅킹을 이용 뿐만 아니라 데이터 제공하는 서비스도 필요
	- 오픈뱅킹 관련하여서는 별도 위키부터 별도 테스크 관리 예정

---

```sql
select '2025-10-01', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-10-02'  
union all select '2025-10-02', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-10-03'  
union all select '2025-10-03', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-10-04'  
union all select '2025-10-04', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-10-05'  
union all select '2025-10-05', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-10-06'  
union all select '2025-10-06', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-10-07'  
union all select '2025-10-07', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-10-08'  
union all select '2025-10-08', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-10-09'  
union all select '2025-10-09', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-10-10'  
union all select '2025-10-10', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-10-11'  
union all select '2025-10-11', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-10-12'  
union all select '2025-10-12', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-10-13'  
union all select '2025-10-13', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-10-14'  
union all select '2025-10-14', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-10-15'  
union all select '2025-10-15', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-10-16'  
union all select '2025-10-16', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-10-17'  
union all select '2025-10-17', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-10-18'  
union all select '2025-10-18', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-10-19'  
union all select '2025-10-19', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-10-20'  
union all select '2025-10-20', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-10-21'  
union all select '2025-10-21', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-10-22'  
union all select '2025-10-22', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-10-23'  
union all select '2025-10-23', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-10-24'  
union all select '2025-10-24', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-10-25'  
union all select '2025-10-25', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-10-26'  
union all select '2025-10-26', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-10-27'  
union all select '2025-10-27', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-10-28'  
union all select '2025-10-28', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-10-29'  
union all select '2025-10-29', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-10-30'  
union all select '2025-10-30', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-10-31'  
union all select '2025-10-31', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-11-01'  
union all select '2025-11-01', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-11-02'  
union all select '2025-11-02', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-11-03'  
union all select '2025-11-03', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-11-04'  
union all select '2025-11-04', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-11-05'  
union all select '2025-11-05', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-11-06'  
union all select '2025-11-06', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-11-07'  
union all select '2025-11-07', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-11-08'  
union all select '2025-11-08', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-11-09'  
union all select '2025-11-09', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-11-10'  
union all select '2025-11-10', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-11-11'  
union all select '2025-11-11', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-11-12'  
union all select '2025-11-12', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-11-13'  
union all select '2025-11-13', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-11-14'  
union all select '2025-11-14', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-11-15'  
union all select '2025-11-15', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-11-16'  
union all select '2025-11-16', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-11-17'  
union all select '2025-11-17', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-11-18'  
union all select '2025-11-18', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-11-19'  
union all select '2025-11-19', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-11-20'  
union all select '2025-11-20', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-11-21'  
union all select '2025-11-21', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-11-22'  
union all select '2025-11-22', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-11-23'  
union all select '2025-11-23', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-11-24'  
union all select '2025-11-24', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-11-25'  
union all select '2025-11-25', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-11-26'  
union all select '2025-11-26', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-11-27'  
union all select '2025-11-27', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-11-28'  
union all select '2025-11-28', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-11-29'  
union all select '2025-11-29', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-11-30'  
union all select '2025-11-30', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-12-01'  
union all select '2025-12-01', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-12-02'  
union all select '2025-12-02', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-12-03'  
union all select '2025-12-03', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-12-04'  
union all select '2025-12-04', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-12-05'  
union all select '2025-12-05', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-12-06'  
union all select '2025-12-06', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-12-07'  
union all select '2025-12-07', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-12-08'  
union all select '2025-12-08', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-12-09'  
union all select '2025-12-09', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-12-10'  
union all select '2025-12-10', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-12-11'  
union all select '2025-12-11', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-12-12'  
union all select '2025-12-12', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-12-13'  
union all select '2025-12-13', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-12-14'  
union all select '2025-12-14', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-12-15'  
union all select '2025-12-15', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-12-16'  
union all select '2025-12-16', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-12-17'  
union all select '2025-12-17', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-12-18'  
union all select '2025-12-18', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-12-19'  
union all select '2025-12-19', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-12-20'  
union all select '2025-12-20', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-12-21'  
union all select '2025-12-21', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-12-22'  
union all select '2025-12-22', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-12-23'  
union all select '2025-12-23', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-12-24'  
union all select '2025-12-24', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-12-25'  
union all select '2025-12-25', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-12-26'  
union all select '2025-12-26', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-12-27'  
union all select '2025-12-27', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-12-28'  
union all select '2025-12-28', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-12-29'  
union all select '2025-12-29', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-12-30'  
union all select '2025-12-30', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2025-12-31'  
union all select '2025-12-31', sum(manual_cancel_amount) from statistics.daily_accounting_statistics where report_day >= '2025-07-01' and report_day < '2026-01-01';
```